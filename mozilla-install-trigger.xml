<?xml version="1.0" encoding="UTF-8" ?>
<Module>
	<ModulePrefs title="Mozilla Install Trigger" author="Sonthakit Leelahanon"/>
	<UserPref name="url" display_name="URL" required="true" />
	<UserPref name="hash" display_name="SHA1 Hash" required="true" />
	<Content type="html">
		<![CDATA[
			<script type="application/javascript">
				var prefs = new gadgets.Prefs();
				var prefUrl = prefs.getString("url");
				var prefHash = "sha1:" + prefs.getString("hash");
				function install (aEvent) {
					try {
						for (var a = aEvent.target; a.href === undefined;) a = a.parentNode;
						var params = {
							"Foo": {
								URL: prefUrl,
								Hash: prefHash,
								toString: function () { return this.URL; }
							}
						};
						InstallTrigger.install(params);
						return false;
					} catch(e) {
					}
				}
			</script>
			<a id="MozillaInstallTriggerLink" href="" onclick="return install(event);">Here</a>
		]]>
	</Content>
</Module>

